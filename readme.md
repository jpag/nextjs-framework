## WIP
This project is currently a work in progress boilerplate. More documentation to follow.

## Intent
A boilerplate setup to hopefully get a site up and running simply with the end result being a static frontend. All data is accessed via /api/ the API responses currently use JSON stored in data/*.js files. But the API responses could in theory handle 3rd party requests, parse and output static snapshots of data during a new build/deployment.

## Features
- Built on top of NextJS.
- Using Stylus and CSS Grid
- Rupture for breakpoints
- Grid and Stylesheet demos
- Responsive Text Sizes Mixin
- SPA approach - Page Transitions available app.jsx toggles `loading`/`loaded` classes. Make sure to use <Link>
- Static Export with rendered pages. SEO friendly.
- Support for static JSON (or dynamic JSON) endpoints. Can be digested and managed in `/api`
- APIs are not supported for Static Export. The current fix manually scrapes the `dev` environment and saves all dynamic JSON paths as static in the exports folder. It needs to be refactored.


## Development
This is using NextJS. To get running
```
npm run dev
```
You should be able to visit the site at `http://localhost:3000/`. [Default port set]

## Export
To export as a static site build
```
npm run export
```
This will export to a static folder `static-export`
Export runs through a few steps. Using the `scripts/exports.*.js` files.
- `exports.build.js` executes next to build: `npm next build`
- `exports.build.js` executes next to export: `npm next export` with the static directory `static-export`. (This can be modified in the `export.config.js` file if desired.)
- `exports.build.js` then captures all enpoints in the `/api/` directory. This step is only successsful by running the dev environment during export, and the build script understanding what the possible dynamic paths are to query in the API.
- `exports.sitemap.js` Will capture all the folders in the `static-export` folder and generate a sitemap from the output. Currently the timestamp is based off of the modification date which unfortunately means all pages will be have the same timestamp. This may not align with wanting to show an accurate timestamp based off of content changes. Sitemap ignores certain folders including `static` and `_next`.
- `exports.cleanup.js` removes stray routes generated by next that are wildcard/dynamic. For example it removes any folder with `[slug]`. As that is a nextjs pathing structure and not a desired landing page.

### Requirements
Install `node` and `NPM`. Or `yarn`

```
npm install
```

or

```
yarn
```

### Pages
The file-system is the main API. Every `pages/[name].js` file becomes a route `[name]` that gets automatically processed and rendered.

Current pages:
```
| - /stylguide
| - /grid
```

This configuration also demonstrates how to use a .JSON folder to dynamically render out paths using a specific "article" template. Slugs are generated consistently using the slugify helper function on all titles. `slugify(title)`

```
| -- /articles/[slug]
```

### Data
All data is stored in the `./data` folder. However there is no reason why this could not be converted to "live" data using async/fetch operations. This will capture a snapshot of the data at time of build.

### CSS
We are using `Style` and `@zeit/next-stylus` to configure styling. We can thus import and pass around variables and specific shared style sheets which can be expanded on all Styles are stored in the `styles` directory.

- Stylus
- Rupture (simple media queries)
- PostCSS
- AutoPrefixer

Review the `next.config.js` with further details.
\
The CSS structure is broken:
- base (base styling, including colors, fonts, and grid,)
- components
- mixins (repurposeable mixins)
- pages
- variables (values used throughout the site.)

### Static file serving (e.g.: images)
Create a folder called static in your project root directory. From your code you can then reference those files with /static/ URLs:

```
function MyImage() {
  return <img src="/static/my-image.png" alt="my image" />
}

export default MyImage
```